---
layout: post
title: go 中的零值
tags: go
mermaid: false
math: false
---  

在 Go 语言中，零值（Zero Value）是指在声明变量但没有显式赋值的情况下，变量会被自动赋予一个默认值。这个默认值取决于变量的类型，不同类型的变量会有不同的零值。零值是 Go 语言中的一个重要概念，因为它确保了变量在声明后具有一个可预测的初始状态，减少了未初始化变量引发的问题。

以下是一些常见类型的零值和关于零值的详细信息：

### 1. 整数类型

- 对于有符号整数（`int`、`int8`、`int16`、`int32`、`int64`），零值为 `0`。
- 对于无符号整数（`uint`、`uint8`、`uint16`、`uint32`、`uint64`），零值也为 `0`。

### 2. 浮点数类型

- 对于浮点数类型（`float32` 和 `float64`），零值为 `0.0`。

### 3. 布尔类型

- 对于布尔类型（`bool`），零值为 `false`。

### 4. 字符串类型

- 对于字符串类型（`string`），零值为空字符串 `""`。

### 5. 数组类型

- 对于数组类型，每个元素的零值是其类型的零值。例如，`[3]int` 数组的零值是 `[0, 0, 0]`。

### 6. 切片类型

- 对于切片类型（`[]T`，其中 `T` 是任何类型），切片的零值是 `nil`，表示一个未分配底层数组的切片。长度和容量都为 `0`。

### 7. 映射类型

- 对于映射类型（`map[T]U`，其中 `T` 和 `U` 是任何类型），映射的零值是 `nil`，表示一个未分配内部数据结构的映射。

### 8. 通道类型

- 对于通道类型（`chan T`，其中 `T` 是任何类型），通道的零值是 `nil`，表示一个未初始化的通道。

### 9. 结构体类型

- 对于结构体类型（`struct`），结构体的零值是将其所有字段都设置为其类型的零值。

### 10. 指针类型

- 对于指针类型（`*T`，其中 `T` 是任何类型），指针的零值是 `nil`，表示一个未初始化的指针。

### 11. 接口类型

- 对于接口类型（`interface{}`），接口的零值是 `nil`，表示一个未实现任何方法的接口。

零值在 Go 语言中是一种有用的特性，因为它确保了变量在声明后处于可预测的初始状态，而不会包含随机或未知的值。这有助于避免潜在的错误和增加代码的可读性。

要注意的是，零值只在声明变量但未显式初始化时才会生效。如果你显式初始化一个变量，那么它将采用你提供的值而不是零值。例如：

```go
var x int       // 零值为 0
var y int = 42  // 显式初始化为 42
```

了解 Go 中不同类型的零值是编写可靠和清晰代码的重要一部分。零值确保了变量的可预测初始状态，减少了未初始化变量引发的问题。

### 12. nil与零值

`nil` 和零值（Zero Value）并不完全相同，尽管它们在某些情况下可能有相似的效果，但它们代表了不同的概念。

1. **nil**：

   - `nil` 是一个特殊的值，通常用于表示指针、切片、映射、通道和接口等数据结构的未初始化状态。
   - 对于指针、切片、映射、通道和接口，`nil` 表示这些数据结构没有分配底层资源或没有被初始化。
   - `nil` 不是一个有效的值，它不能用于表示具体的数据或有效的对象。
   - 当对一个 `nil` 数据结构执行操作时，通常会引发运行时错误，例如尝试在 `nil` 切片上进行索引操作或在 `nil` 映射上执行读取操作。

2. **零值**：

   - 零值是指在声明变量但未显式赋值时，变量会自动被赋予一个默认值。
   - 不同类型的变量具有不同的零值，例如整数的零值是 `0`，字符串的零值是空字符串 `""`。
   - 零值确保了变量在声明后处于可预测的初始状态，而不会包含随机或未知的值。

尽管在某些情况下 `nil` 和零值可能表现得相似，例如 `nil` 切片和零值切片都表示空切片，但它们的含义不同。`nil` 表示未初始化或无效状态，而零值表示具有特定数据类型的默认值。因此，在实际编程中，需要根据上下文和数据类型来确定是使用 `nil` 还是零值。

`nil` 和零值是 Go 语言中的两个不同的概念，分别用于表示未初始化状态和默认值。了解它们的区别有助于编写清晰、可读性强的代码。

---

<div align="center">
  <img src="../img/qrcode_wechat.jpg" alt="孟斯特">
</div>

> 声明：本作品采用[署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)进行许可，使用时请注明出处。  
> Author: [mengbin](mengbin1992@outlook.com)  
> blog: [mengbin](https://mengbin.top)  
> Github: [mengbin92](https://mengbin92.github.io/)  
> cnblogs: [恋水无意](https://www.cnblogs.com/lianshuiwuyi/)  

---
